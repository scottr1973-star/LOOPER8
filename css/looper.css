:root{--bg:#0b0f0c;--panel:#111718;--ink:#e8f5e9;--muted:#9fb3a9;--line:rgba(255,255,255,.12);
      --g1:#00e676;--g2:#29b6f6;--g3:#ffd54f;--g4:#ff8a65;--g5:#a1887f;--g6:#b39ddb;--g7:#80cbc4;--g8:#ffcc80;
      --rec:#ff5252;--ledOff:#18302b}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:#e8f5e9;font-family:Inter,system-ui,sans-serif}
.wrap{max-width:980px;margin:0 auto;padding:14px; height: 100%; display: flex; flex-direction: column;}
h1{margin:0;font-size:18px}
.header-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }

.card{background:linear-gradient(180deg,#111718,#0e1416);border:1px solid var(--line);border-radius:12px;padding:10px; flex-shrink: 0;}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.spacer{flex:1}
.btn{padding:8px 10px;border-radius:8px;border:1px solid var(--line);background:#152325;color:#e8f5e9;font-weight:700;cursor:pointer;font-size:13px; transition: all 0.1s;}
.btn:active { transform: translateY(1px); }
.btn.red{background:#3a1717}.btn.green{background:#10371f}.btn.gray{background:#1a1f20}.btn.blue{background:#112a38}
.btn:disabled{opacity:.5;cursor:not-allowed}
.small{padding:4px 8px;font-size:11px}
.num,select{padding:6px;border-radius:6px;border:1px solid var(--line);background:#0b1314;color:#e8f5e9;font-size:12px}
.badge{font-size:12px;background:#cde7df;color:#000;padding:2px 6px;border-radius:4px;font-weight:700}
.hint{color:#9fb3a9;font-size:11px}

/* TRACKS LIST */
.tracks{display:grid;grid-template-columns:1fr;gap:6px;margin-top:10px; overflow-y: auto; flex: 1;}
.track{display:grid;grid-template-columns:100px 1fr auto;gap:8px;align-items:center;background:#0b1314;border:1px solid var(--line);border-radius:8px;padding:6px}

.tlabel{
  font-weight:800; font-size:13px; color:#0b0f0c; 
  padding:0; height: 100%; min-height: 36px;
  border-radius:6px; text-align:center;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; user-select: none;
  transition: all 0.2s;
}
.tlabel:hover { filter: brightness(1.1); }
.tlabel.recording-active {
  background-color: var(--rec) !important;
  color: #fff !important;
  box-shadow: 0 0 10px var(--rec);
  animation: pulse-red 1.5s infinite;
}

.c1{background:var(--g1)} .c2{background:var(--g2)} .c3{background:var(--g3)} .c4{background:var(--g4)}
.c5{background:var(--g5)} .c6{background:var(--g6)} .c7{background:var(--g7)} .c8{background:var(--g8)}

.mid{display:flex; flex-direction: column; gap:4px; justify-content: center;}
.leds{display:flex; gap:1px; height: 6px;}
.led{flex:1; background:var(--ledOff); opacity:.4;}
.led.on{opacity:1; filter:brightness(2); background: #fff;}
.bar{height:6px;border-radius:3px;background:#13201d;position:relative;overflow:hidden;}
.fill{position:absolute;left:0;top:0;bottom:0;width:0;background:rgba(255,255,255,.3);}
.fill.rec{background:rgba(255,82,82,.5);}

.ctrls{display:flex;gap:4px;flex-wrap:wrap;align-items:center}
.vol{width:60px}
.status{font-size:10px;color:#9fb3a9; width: 40px; text-align: center;}
.chip{font-size:10px;border:1px solid var(--line);border-radius:4px;padding:2px 6px; min-width: 40px; text-align: center;}
.chip.rec{background:#3a1717;color:#ffdcdc;border-color:#5d2020}
.chip.idle{background:#182226}

.meterWrap{display:flex;align-items:center;gap:8px}
.meterBar{width:80px;height:6px;border-radius:3px;background:#1a2422;overflow:hidden;border:1px solid var(--line)}
.meterFill{height:100%;width:0;background:#2bd17e; transition: background 0.2s; }
.meterFill.recording { background: var(--rec) !important; box-shadow: 0 0 8px var(--rec); }

.tempoCard{margin-top:6px;background:#0b1314;border-radius:8px;padding:8px;display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.tempoGroup{display:flex;flex-direction:column;gap:4px}
.tempoRow{display:flex;gap:6px;align-items:center}

/* ====== EASY MODE GRID ====== */
.hidden { display: none !important; }

.easy-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: repeat(2, 1fr);
  gap: 12px;
  flex: 1;
  margin-top: 10px;
}

@media (max-width: 700px) {
  .easy-grid {
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(4, 1fr);
  }
}

.easy-pad {
  position: relative;
  background: #151a1d;
  border: 2px solid var(--line);
  border-radius: 12px;
  cursor: pointer;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transition: transform 0.1s;
  user-select: none;
}
.easy-pad:active { transform: scale(0.98); }

.easy-pad.recording {
  border-color: var(--rec);
  box-shadow: 0 0 15px rgba(255, 82, 82, 0.3);
}

.easy-pad-fill {
  position: absolute;
  top: 0; left: 0; bottom: 0;
  width: 0%;
  background: currentColor;
  opacity: 0.4;
  z-index: 0;
  transition: none; 
}

.easy-pad.recording .easy-pad-fill {
  background: var(--rec);
  opacity: 0.7;
}

.easy-pad-content {
  position: relative;
  z-index: 1;
  text-align: center;
  pointer-events: none;
  text-shadow: 0 1px 4px rgba(0,0,0,0.8);
}

.ep-label { font-size: 24px; font-weight: 900; color: #fff; }
.ep-status { font-size: 12px; font-weight: 700; text-transform: uppercase; margin-top: 4px; color: rgba(255,255,255,0.9); }

.easy-pad.c1 { color: var(--g1); border-color: var(--g1); }
.easy-pad.c2 { color: var(--g2); border-color: var(--g2); }
.easy-pad.c3 { color: var(--g3); border-color: var(--g3); }
.easy-pad.c4 { color: var(--g4); border-color: var(--g4); }
.easy-pad.c5 { color: var(--g5); border-color: var(--g5); }
.easy-pad.c6 { color: var(--g6); border-color: var(--g6); }
.easy-pad.c7 { color: var(--g7); border-color: var(--g7); }
.easy-pad.c8 { color: var(--g8); border-color: var(--g8); }

/* FX Panel Styles */
#fxPanel {
  position: fixed; 
  top: 50%; left: 50%;
  /* Crucial: Initial centering using transform, will be removed by JS on drag */
  transform: translate(-50%, -50%);
  width: 400px; max-height: 80vh; overflow-y: auto;
  background: var(--panel); border: 1px solid var(--line);
  box-shadow: 0 10px 40px rgba(0,0,0,0.8); z-index: 2000;
  border-radius: 12px; color: var(--ink); display: flex; flex-direction: column;
}
#fxPanelHeader { padding: 10px; background: #152325; border-radius: 12px 12px 0 0; display: flex; justify-content: space-between; align-items: center; font-weight: 700; cursor: move; }
#fxPanelClose { 
  background: none; border: none; color: #fff; 
  font-size: 24px; line-height: 1; padding: 0 8px; cursor: pointer; 
}
#fxPanelContent { padding: 10px; display: flex; flex-direction: column; gap: 10px; }
.fx-module { border: 1px solid var(--line); border-radius: 6px; padding: 8px; background: #0e1416; }
.fx-title { font-weight: 700; margin-bottom: 6px; display: flex; align-items: center; gap: 6px; }
.fx-grid { display: flex; flex-direction: column; gap: 4px; }
.fx-grid.three { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; }
.fx-grid label { display: flex; flex-direction: column; font-size: 11px; color: var(--muted); }
.fx-grid output { font-weight: 700; color: var(--ink); font-size: 13px; margin-top: 2px; }
#fxPanelResizeHandle { height: 12px; cursor: se-resize; background: rgba(255,255,255,0.05); }
#toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #333; color: #fff; padding: 6px 12px; border-radius: 20px; font-size: 12px; opacity: 0; pointer-events: none; transition: opacity 0.3s; z-index: 3000; }
